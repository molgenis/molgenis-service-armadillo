plugins {
    // 1. Core Language
    id "java"

    // 2. Code Formatting (Keep this for consistency)
    id "com.diffplug.spotless" version "6.25.0"
}

tasks.withType(JavaCompile).configureEach {
    options.compilerArgs += '--enable-preview'
}

tasks.withType(Test).configureEach {
    jvmArgs += '--enable-preview'
}

tasks.withType(JavaExec).configureEach {
    jvmArgs += '--enable-preview'
}


// Disable Spring Boot's application packaging, as this is NOT an application
jar.enabled = true
bootJar.enabled = false

repositories {
    mavenCentral() // Simplest repo, as your base template suggests it's available here
}

dependencies {
    // This section is CRITICAL: Only include dependencies required by the
    // interfaces and models moved into this module.

    // Must-have: Guava is used by ImmutableMap/ImmutableSet (common in APIs/models)
    implementation 'com.google.guava:guava:33.1.0-jre'

    // Must-have: If AutoValue is used in the models you move here
    implementation 'com.google.auto.value:auto-value-annotations:1.10.4'
    annotationProcessor "com.google.auto.value:auto-value:1.10.4"

    // Optional (Check imports): If validation annotations are used in models
    implementation 'jakarta.validation:jakarta.validation-api:3.1.1'

    // IMPORTANT REMOVALS:
    // All R, Spring Boot, Spring Security, httpclient5, and testing dependencies are removed.
    // They are not used by pure interfaces/models and would add unnecessary weight/dependencies.
}

// ⚠️ Remove all test/Jacoco configurations: They are irrelevant for an API module.

spotless {
    java {
        googleJavaFormat('1.17.0')
    }
}

build.dependsOn spotlessApply

// Set source and target compatibility (often inherited, but good practice)
java {
    sourceCompatibility = JavaVersion.VERSION_17 // Or whatever version your project uses
    targetCompatibility = JavaVersion.VERSION_17
}