
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://molgenis.github.io/molgenis-service-armadillo/pages/install_management/armadillo_install/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../armadillo_docker_install/">
      
      
        
      
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>Armadillo Installation - MOLGENIS Armadillo Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/simple.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#armadillo-installation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="MOLGENIS Armadillo Docs" class="md-header__button md-logo" aria-label="MOLGENIS Armadillo Docs" data-md-component="logo">
      
  <img src="../../../img/armadillo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MOLGENIS Armadillo Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Armadillo Installation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/molgenis/molgenis-service-armadillo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    MOLGENIS Armadillo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="MOLGENIS Armadillo Docs" class="md-nav__button md-logo" aria-label="MOLGENIS Armadillo Docs" data-md-component="logo">
      
  <img src="../../../img/armadillo-logo.png" alt="logo">

    </a>
    MOLGENIS Armadillo Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/molgenis/molgenis-service-armadillo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    MOLGENIS Armadillo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basic Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about_us/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About us
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../basic_usage/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Basic Usage
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Basic Usage
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/armadillo_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Armadillo User Interface
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/central_analysis_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Central Analysis Server (CAS)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/ds_molgenis_armadillo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DSMolgenisArmadillo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/molgenis_armadillo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MolgenisArmadillo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/dsupload_dsdictionaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dsUpload & dsDictionaries
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/dslite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dsLite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Install, Setup and Management
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Install, Setup and Management
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Armadillo Installation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Armadillo Installation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requirements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server resources
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Software requirements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-authentication-providers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Authentication Providers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-local-keycloak-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Local Keycloak Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-with-a-consortium-authentication-server-datashield" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering with a consortium authentication server (DataSHIELD)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registering with a consortium authentication server (DataSHIELD)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-send-when-registering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What to send when registering
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the connection
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-armadillo-as-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing Armadillo as service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing Armadillo as service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-necessary-software" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Install necessary software
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-run-installation-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Run installation script
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Run installation script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-download-the-setup-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Download the setup script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-run-the-install-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Run the install script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-locations" class="md-nav__link">
    <span class="md-ellipsis">
      
        File locations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controlling-the-armadillo-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controlling the Armadillo service
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-proxy-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up Proxy Server
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backups
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-or-restrict-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disable or restrict Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disable or restrict Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-disable-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Disable Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-restrict-metrics-nginx-as-a-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Restrict Metrics: Nginx as a Reverse Proxy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install alternatives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's next?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apache
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      
        Encoding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tell-armadillo-about-https" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tell Armadillo about https
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-to-your-site-enabled-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to your site-enabled configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_docker_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Armadillo Docker Quicksetup
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Armadillo Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_minor_release_update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Armadillo Minor Release Update
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_migrate_2_to_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate Armadillo 2 to 3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_migrate_3_to_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate Armadillo 3 to 4
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_migrate_4_to_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Migrate Armadillo 4 to 5
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev_guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer guides
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FAQ
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contact
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Requirements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#server-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Server resources
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#software-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      
        Software requirements
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#domain" class="md-nav__link">
    <span class="md-ellipsis">
      
        Domain
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-authentication-providers" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Authentication Providers
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-local-keycloak-setup" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Local Keycloak Setup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#registering-with-a-consortium-authentication-server-datashield" class="md-nav__link">
    <span class="md-ellipsis">
      
        Registering with a consortium authentication server (DataSHIELD)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Registering with a consortium authentication server (DataSHIELD)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-to-send-when-registering" class="md-nav__link">
    <span class="md-ellipsis">
      
        What to send when registering
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#securing-the-connection" class="md-nav__link">
    <span class="md-ellipsis">
      
        Securing the connection
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-armadillo-as-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Installing Armadillo as service
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installing Armadillo as service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-install-necessary-software" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Install necessary software
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-run-installation-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Run installation script
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Run installation script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-download-the-setup-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Download the setup script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-run-the-install-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Run the install script
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-locations" class="md-nav__link">
    <span class="md-ellipsis">
      
        File locations
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#controlling-the-armadillo-service" class="md-nav__link">
    <span class="md-ellipsis">
      
        Controlling the Armadillo service
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-proxy-server" class="md-nav__link">
    <span class="md-ellipsis">
      
        Setting up Proxy Server
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backups" class="md-nav__link">
    <span class="md-ellipsis">
      
        Backups
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-or-restrict-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        Disable or restrict Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Disable or restrict Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-disable-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Disable Metrics
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-restrict-metrics-nginx-as-a-reverse-proxy" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Restrict Metrics: Nginx as a Reverse Proxy
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#install-alternatives" class="md-nav__link">
    <span class="md-ellipsis">
      
        Install alternatives
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      
        What's next?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apache" class="md-nav__link">
    <span class="md-ellipsis">
      
        Apache
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apache">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#encoding" class="md-nav__link">
    <span class="md-ellipsis">
      
        Encoding
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tell-armadillo-about-https" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tell Armadillo about https
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-to-your-site-enabled-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Changes to your site-enabled configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="armadillo-installation">Armadillo installation</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This guide assumes you are using Ubuntu Server LTS, the installation script expects the <code>systemd</code> service. See <a href="#install-alternatives">Install alternatives</a> below.</p>
</div>
<h2 id="requirements">Requirements</h2>
<h2 id="server-resources">Server resources</h2>
<p>You need a server or virtual machine to deploy the Armadillo stack. The specifications of the resource are the following, depending on the participant size of the cohort you are running.</p>
<table>
<thead>
<tr>
<th>Participants</th>
<th>Memory (in GB)</th>
<th>Diskspace (in GB)</th>
<th>CPU cores</th>
</tr>
</thead>
<tbody>
<tr>
<td>0-20.000</td>
<td>8</td>
<td>100</td>
<td>4</td>
</tr>
<tr>
<td>20.000-70.000</td>
<td>16</td>
<td>100</td>
<td>4</td>
</tr>
<tr>
<td>70.000 &gt;</td>
<td>32</td>
<td>150</td>
<td>8</td>
</tr>
</tbody>
</table>
<p>In case of using dsOmics this setup can be rather bigger. Please <a href="../../contact/">contact</a> us for the latest specifications.</p>
<h2 id="software-requirements">Software requirements</h2>
<ul>
<li>Java 21 JRE or JDK</li>
<li>Docker</li>
</ul>
<p>In addition to these, there are other optional components you may wish to install, such as setting up nginx as a reverse proxy.</p>
<h2 id="domain">Domain</h2>
<p>A domain or an hostname ie <code>cohort.armadillo.domain.org</code> is required to run Armadillo.</p>
<p>This domain is needed for the installation script.</p>
<h2 id="authentication">Authentication</h2>
<p>Before deploying <strong>Armadillo</strong>, you need to register the domain that your Armadillo instance will use with an <strong>authentication server</strong>.<br />
This ensures that users can securely sign in and that authorization decisions (who can access what) remain under the control of the <strong>Data Manager</strong> within your Armadillo installation.</p>
<hr />
<h3 id="supported-authentication-providers">Supported Authentication Providers</h3>
<p>Armadillo supports integration with different OpenID Connect (OIDC)–compatible authentication servers, such as:</p>
<ul>
<li><a href="https://www.keycloak.org/">Keycloak</a></li>
<li><a href="https://fusionauth.io/">FusionAuth</a></li>
<li>Other OIDC-compliant identity providers (e.g. Azure AD, Google Identity, etc.)</li>
</ul>
<hr />
<h3 id="example-local-keycloak-setup">Example: Local Keycloak Setup</h3>
<p>If you want to run Armadillo locally or test your deployment, you can use the <strong>Keycloak + Armadillo</strong> quick setup provided in our Docker setup.</p>
<p>You’ll find an example in our <a href="https://molgenis.github.io/molgenis-service-armadillo/pages/install_management/armadillo_docker_install/">documentation</a>, which starts both Keycloak and Armadillo and automatically configures OIDC integration.</p>
<h3 id="registering-with-a-consortium-authentication-server-datashield">Registering with a consortium authentication server (DataSHIELD)</h3>
<p>If your organization is part of a consortium that offers a shared authentication server (for example the <strong>DataSHIELD authentication server</strong>), you can register your Armadillo domain with them. This delegates authentication and user management to the central server while your Data Manager continues to control authorization inside Armadillo.</p>
<h4 id="what-to-send-when-registering">What to send when registering</h4>
<p>Send an email to the consortium contact (or <code>support@example.org</code> if you use our central contact) containing:</p>
<ul>
<li>The domain(s) for your Armadillo instance (e.g. <code>armadillo.example.org</code>)</li>
<li>The <strong>email address</strong> of the Data Manager who should receive admin permissions</li>
<li>A note that you want to register for the <strong>DataSHIELD authentication server</strong></li>
<li>(Optional) Which project you belong to (e.g. <code>LIFECYCLE</code>, <code>ATHLETE</code>, <code>LONGITOOLS</code>)</li>
</ul>
<p>After processing, you will receive the details you need to configure Armadillo, typically:</p>
<ul>
<li><strong>OIDC Service URL</strong> (example: <code>https://lifecycle-auth.molgenis.org</code>)</li>
<li><strong>OIDC Client ID</strong></li>
<li><strong>OIDC Client Secret</strong></li>
</ul>
<p>These values are then inserted into your deployment configuration (see step 2.p in the deployment guide).</p>
<hr />
<h2 id="securing-the-connection">Securing the connection</h2>
<p>You need a SSL certificate to configuring the front-end proxy and make the browser use <strong>https</strong> before putting data on the server.</p>
<p>If SELinux is enabled, run the following command to ensure that the application can connect to required services:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>setsebool<span class="w"> </span>-P<span class="w"> </span>httpd_can_network_connect<span class="w"> </span>on
</span></code></pre></div>
<h2 id="installing-armadillo-as-service">Installing Armadillo as service</h2>
<p>We run Armadillo in production as a Linux service on Ubuntu, ensuring it gets restarted when the server is rebooted. You might be able to reproduce also on CentOS (using <code>yum</code> instead of <code>apt</code>).</p>
<h3 id="1-install-necessary-software">1. Install necessary software</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>apt<span class="w"> </span>update
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>apt<span class="w"> </span>install<span class="w"> </span>openjdk-21-jre-headless
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>apt<span class="w"> </span>install<span class="w"> </span>docker.io<span class="w"> </span>
</span></code></pre></div>
<details class="note">
<summary>Note</summary>
<p>you might need to execute these commands as <code>sudo</code></p>
</details>
<h3 id="2-run-installation-script">2. Run installation script</h3>
<p>This step will install the latest <a href="https://github.com/molgenis/molgenis-service-armadillo/releases">release</a>.</p>
<p>After installation the Armadillo application is installed with the given configuration and its service.</p>
<h4 id="21-download-the-setup-script">2.1 Download the setup script</h4>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>wget<span class="w"> </span>https://raw.githubusercontent.com/molgenis/molgenis-service-armadillo/master/scripts/install/armadillo-setup.sh<span class="w"> </span>
</span></code></pre></div>
<p>Or manually download the setup script via right click on this <a href="https://raw.githubusercontent.com/molgenis/molgenis-service-armadillo/master/scripts/install/armadillo-setup.sh">link</a> (Right mouse 'save as')</p>
<p>Make sure <code>armadillo-setup.sh</code> is executable using</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>chmod<span class="w"> </span>u+x<span class="w"> </span>armadillo-setup.sh
</span></code></pre></div>
<p>The installation script requires some arguments:</p>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Application</th>
</tr>
</thead>
<tbody>
<tr>
<td>admin-user</td>
<td>Local armadillo admin user</td>
</tr>
<tr>
<td>admin-password</td>
<td>Secure password for the admin user</td>
</tr>
<tr>
<td>datadir</td>
<td>The location where the data is stored. This directory should be have enough diskspace en could be backuped (Default &rarr; /usr/share/armadillo/data)</td>
</tr>
<tr>
<td>domain</td>
<td>The URL where armadillo is listening on. For example: cohort.armadillo.domain.org</td>
</tr>
<tr>
<td>oidc</td>
<td>Enable OIDC, see <a href="#authentication">authentication</a></td>
</tr>
<tr>
<td>oidc_url</td>
<td>Given oidc URL</td>
</tr>
<tr>
<td>oidc_clientid</td>
<td>Given client ID</td>
</tr>
<tr>
<td>oidc_clientsecret</td>
<td>Given secret ID</td>
</tr>
</tbody>
</table>
<h4 id="22-run-the-install-script">2.2 Run the install script</h4>
<p>Adapt the following install command to suit your situation. Use <code>--help</code> to see all options.</p>
<details class="note">
<summary>Note</summary>
<p>https://lifecycle-auth.molgenis.org is MOLGENIS provider of the OIDC service but you can also use your own.</p>
</details>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>bash<span class="w"> </span>armadillo-setup.sh<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span>--admin-user<span class="w"> </span>admin<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span>--admin-password<span class="w"> </span>xxxxx<span class="w"> </span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span>--domain<span class="w"> </span>armadillo.cohort.study.com<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span>--oidc<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span>--oidc_url<span class="w"> </span>https://lifecycle-auth.molgenis.org<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span>--oidc_clientid<span class="w"> </span>clientid<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span>--oidc_clientsecret<span class="w"> </span>secret<span class="w"> </span><span class="se">\</span>
</span></code></pre></div>
<h3 id="file-locations">File locations</h3>
<p>The script creates using default values the follow files and directories:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>ls<span class="w"> </span>/etc/armadillo/application.yml
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>ls<span class="w"> </span>/etc/systemd/system/armadillo.service
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>ls<span class="w"> </span>/usr/share/armadillo/*
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>ls<span class="w"> </span>/var/log/armadillo/*
</span></code></pre></div>
<h2 id="controlling-the-armadillo-service">Controlling the Armadillo service</h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>systemctl<span class="w"> </span>status<span class="w"> </span>armadillo
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>systemctl<span class="w"> </span>stop<span class="w"> </span>armadillo
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>systemctl<span class="w"> </span>start<span class="w"> </span>armadillo
</span></code></pre></div>
<p>After the installation is complete Armadillo is listening on port 8080. Test the setup by visiting <code>http://armadillo.cohort.study.com:8080</code> or type in the terminal <code>wget http://localhost:8080</code> to see a text response.</p>
<details class="note">
<summary>Note</summary>
<p>The Armadillo website is not secure yet so you need to setup a <em>front-end</em> proxy.</p>
</details>
<p>When having setup this <em>front-end</em> proxy you could get a bad gateway (see below). This mostly means Armadillo is not ready yet as you already have tested armadillo as mentioned above.</p>
<div class="language-http highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="err">502 Bad Gateway</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="err">nginx/1.18.0 (Ubuntu)</span>
</span></code></pre></div>
<p>Recheck with <code>wget http://localhost:8080</code> and check the log files.</p>
<h2 id="setting-up-proxy-server">Setting up Proxy Server</h2>
<p>We highly recommend using <code>nginx</code> with MolgenisArmadillo. We use the follow configuration located in <code>/etc/nginx/sites-available/armadillo.conf</code></p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">server</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="kn">listen</span><span class="w"> </span><span class="mi">80</span><span class="p">;</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="kn">server_name</span><span class="w"> </span><span class="s">armadillo.cohort.study.com</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">  </span><span class="s">include</span><span class="w"> </span><span class="s">/etc/nginx/conf.d/*.conf</span><span class="p">;</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">  </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://localhost:8080</span><span class="p">;</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">  </span><span class="kn">client_max_body_size</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">  </span><span class="kn">proxy_read_timeout</span><span class="w"> </span><span class="s">600s</span><span class="p">;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">  </span><span class="kn">proxy_redirect</span><span class="w"> </span><span class="s">http://localhost:8080/</span><span class="w"> </span><span class="nv">$scheme://$host/</span><span class="p">;</span>
</span><span id="__span-8-10"><a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">  </span><span class="kn">proxy_set_header</span><span class="w"> </span><span class="s">Host</span><span class="w"> </span><span class="nv">$host</span><span class="p">;</span>
</span><span id="__span-8-11"><a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">  </span><span class="kn">proxy_http_version</span><span class="w"> </span><span class="mi">1</span><span class="s">.1</span><span class="p">;</span>
</span><span id="__span-8-12"><a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-8-13"><a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="p">}</span>
</span></code></pre></div>
<details class="note">
<summary>Note</summary>
<p>The above is still not secure but not you can reach Armadillo from <code>http://armadillo.cohort.study.com</code>.</p>
</details>
<p>To secure the communication using https we have a <a href="https://raw.githubusercontent.com/molgenis/molgenis-service-armadillo/master/scripts/install/conf/armadillo-nginx.conf">nginx example</a></p>
<h2 id="backups">Backups</h2>
<p>A good start for data backup is the <code>/usr/share/armadillo</code> and <code>/etc/armadillo</code>. If you gave another datadir as setup option you also should backup this directory. For disaster backups you should contact your IT department.</p>
<h2 id="metrics">Metrics</h2>
<p>The Spring Boot Actuator endpoint is by default open to all authenticated users (the health and info endpoint are open to all). To allow for monitoring as well, we added the possibility of configuring an api-token that will give access to the actuator endpoint without logging in otherwise.
To configure this api key, an addition will have to be made to the <code>application.yml</code> of Armadillo (just like how the local admin user and password are configured):
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">armadillo</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">api-key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-secret-api-key</span>
</span></code></pre></div>
After configuring this, the endpoint can be reached:
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>curl<span class="w"> </span><span class="s1">&#39;http://localhost:8080/actuator/prometheus&#39;</span><span class="w"> </span>-i<span class="w"> </span>-X<span class="w"> </span>GET<span class="w"> </span><span class="se">\ </span>v
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w"> </span>-H<span class="w"> </span><span class="s1">&#39;Accept: text/plain&#39;</span><span class="w"> </span>--header<span class="w"> </span><span class="s1">&#39;X-API-KEY: my-secret-api-key&#39;</span>
</span></code></pre></div></p>
<p>The endpoint will still be available via basicauth and oauth as well, either logging in and then accessing via the browser or by passing Authorization headers with the correct authorization details.</p>
<p>You can use this in your monitoring application like prometheus.
(Config example for prometheus)
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">scrape_configs</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;my-armadillo-app&#39;</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;/actuator/prometheus&#39;</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">    </span><span class="nt">static_configs</span><span class="p">:</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">targets</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;armadilo.url-example.com:8080&#39;</span><span class="p p-Indicator">]</span>
</span></code></pre></div></p>
<h3 id="disable-or-restrict-metrics">Disable or restrict Metrics</h3>
<p>Spring Boot Actuator is accessible for all users in our project (including <code>/actuator/metrics</code>).<br />
Below are ways to <strong>disable</strong> or <strong>restrict</strong> it.</p>
<hr />
<h4 id="1-disable-metrics">1. Disable Metrics</h4>
<p>To remove <code>/actuator/metrics</code> from HTTP exposure, add this to <code>application.yml</code>:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">management</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">endpoints</span><span class="p">:</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nt">web</span><span class="p">:</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">      </span><span class="nt">exposure</span><span class="p">:</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">        </span><span class="nt">exclude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">metrics</span>
</span></code></pre></div>
<ul>
<li>✅ Other endpoints (like <code>/actuator/health</code>, <code>/actuator/info</code>) remain available  </li>
<li>❌ <code>/actuator/metrics</code> returns <code>404 Not Found</code>  </li>
</ul>
<p>If you want to disable <strong>all metrics collection</strong> (Micrometer), add:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">management</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">metrics</span><span class="p">:</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nt">enable</span><span class="p">:</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">      </span><span class="nt">all</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div>
<hr />
<h4 id="2-restrict-metrics-nginx-as-a-reverse-proxy">2. Restrict Metrics: <strong>Nginx as a Reverse Proxy</strong></h4>
<p>At the infrastructure level, you can block or whitelist IPs for Actuator endpoints.</p>
<div class="language-nginx highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="k">location</span><span class="w"> </span><span class="s">/actuator/metrics</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">    </span><span class="kn">allow</span><span class="w"> </span><span class="mi">192</span><span class="s">.168.1.0/24</span><span class="p">;</span><span class="w">   </span><span class="c1"># whitelist internal network</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="kn">deny</span><span class="w"> </span><span class="s">all</span><span class="p">;</span><span class="w">               </span><span class="c1"># block others</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://localhost:8080/actuator/metrics</span><span class="p">;</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="p">}</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">location</span><span class="w"> </span><span class="s">/actuator/</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="s">http://localhost:8080/actuator/</span><span class="p">;</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="install-alternatives">Install alternatives</h2>
<ul>
<li>On local machine using java</li>
<li>Armadillo running as a <a href="../armadillo_docker_install/">Docker</a> container.</li>
<li><a href="#apache">Apache</a></li>
</ul>
<h2 id="whats-next">What's next?</h2>
<ul>
<li><a href="https://molgenis.github.io/molgenis-r-armadillo/">For the server owner or data manager who need to put data on to the server</a></li>
<li><a href="https://molgenis.github.io/molgenis-r-datashield/">For the researcher who want to start analyzing the data on the server</a></li>
</ul>
<h2 id="apache">Apache</h2>
<p>It is possible to run Molgenis Armadillo using Apache, however we do <strong>not</strong> provide support with this configuration.</p>
<h3 id="encoding">Encoding</h3>
<p>Apache requires some additional configuration to get the <code>/storage/projects/{project}/objects/{object}</code> to work. When this endpoint doesn't work:</p>
<div class="language-text highlight"><pre><span></span><code>- tables cannot be assigned
- subsets cannot be created
- resources cannot be used.
</code></pre></div>
<h3 id="tell-armadillo-about-https">Tell Armadillo about https</h3>
<p>We need to tell Armadillo server how to building URLs.</p>
<h3 id="changes-to-your-site-enabled-configuration">Changes to your site-enabled configuration</h3>
<p>Your configuration probably should look like this.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ProxyPreserveHost On
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>ProxyPass / http://localhost:8080/ nocanon
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>AllowEncodedSlashes On
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>RequestHeader set X-Forwarded-Proto https
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>RequestHeader set X-Forwarded-Port 443
</span></code></pre></div>
<p>After setting this don't forget to restart Apache.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation, Setup and Management">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Installation, Setup and Management
              </div>
            </div>
          </a>
        
        
          
          <a href="../armadillo_docker_install/" class="md-footer__link md-footer__link--next" aria-label="Next: Armadillo Docker Quicksetup">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Armadillo Docker Quicksetup
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    Please cite <a href="https://doi.org/10.1093/bioinformatics/btae726" target="_blank">Cadman et al (2024)</a> when using MOLGENIS Armadillo.
    <div>
        Documentation made with
        <a
                href="https://squidfunk.github.io/mkdocs-material/"
                target="_blank" rel="noopener"
        >
            Material for MkDocs
        </a>
    </div>

</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/molgenis" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/molgenis" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["content.code.copy", "content.tooltips", "navigation.indexes", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>