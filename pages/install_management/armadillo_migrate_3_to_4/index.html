
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://molgenis.github.io/molgenis-service-armadillo/pages/install_management/armadillo_migrate_3_to_4/">
      
      
        <link rel="prev" href="../armadillo_migrate_2_to_3/">
      
      
        <link rel="next" href="../armadillo_migrate_4_to_5/">
      
      
      <link rel="icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Migrate Armadillo 3 to 4 - MOLGENIS Armadillo Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/simple.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#migrate-armadillo-3-to-armadillo-4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="MOLGENIS Armadillo Docs" class="md-header__button md-logo" aria-label="MOLGENIS Armadillo Docs" data-md-component="logo">
      
  <img src="../../../img/armadillo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MOLGENIS Armadillo Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Migrate Armadillo 3 to 4
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/molgenis/molgenis-service-armadillo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    MOLGENIS Armadillo
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="MOLGENIS Armadillo Docs" class="md-nav__button md-logo" aria-label="MOLGENIS Armadillo Docs" data-md-component="logo">
      
  <img src="../../../img/armadillo-logo.png" alt="logo">

    </a>
    MOLGENIS Armadillo Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/molgenis/molgenis-service-armadillo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    MOLGENIS Armadillo
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quick_start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about_us/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About us
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../basic_usage/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Basic Usage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Basic Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/armadillo_ui/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Armadillo User Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/central_analysis_server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Central Analysis Server (CAS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/ds_molgenis_armadillo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DSMolgenisArmadillo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/molgenis_armadillo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MolgenisArmadillo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/dsupload_dsdictionaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dsUpload & dsDictionaries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/dslite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    dsLite
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../basic_usage/auth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authentication Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Install, Setup and Management
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Install, Setup and Management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Armadillo Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_docker_install/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Armadillo Docker Quicksetup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Armadillo Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_minor_release_update/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Armadillo Minor Release Update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_migrate_2_to_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate Armadillo 2 to 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Migrate Armadillo 3 to 4
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Migrate Armadillo 3 to 4
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-latest-version" class="md-nav__link">
    <span class="md-ellipsis">
      Get latest version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-check-your-profile-types" class="md-nav__link">
    <span class="md-ellipsis">
      1. Check your profile types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-check-server-space" class="md-nav__link">
    <span class="md-ellipsis">
      2. Check server space
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Check server space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-check-disk-space" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Check disk space
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-check-docker-images" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Check docker images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-download-required-files" class="md-nav__link">
    <span class="md-ellipsis">
      3. Download required files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Download required files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-update-script" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Update script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-run-update-script" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Run update script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-config-the-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      4. Config the new version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Config the new version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 application.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-make-backup-of-system-config" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Make backup of system config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-restart-application-using-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      5. Restart application using new version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Restart application using new version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-stop-armadillo" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Stop Armadillo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-link-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Link new version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-restart-armadillo" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Restart Armadillo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-log-on-to-the-ui" class="md-nav__link">
    <span class="md-ellipsis">
      6. Log on to the UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-update-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      7. Update profiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    <span class="md-ellipsis">
      Logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compare-applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      Compare application.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../armadillo_migrate_4_to_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate Armadillo 4 to 5
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dev_guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#get-latest-version" class="md-nav__link">
    <span class="md-ellipsis">
      Get latest version
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-check-your-profile-types" class="md-nav__link">
    <span class="md-ellipsis">
      1. Check your profile types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-check-server-space" class="md-nav__link">
    <span class="md-ellipsis">
      2. Check server space
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Check server space">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-check-disk-space" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Check disk space
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-check-docker-images" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Check docker images
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-download-required-files" class="md-nav__link">
    <span class="md-ellipsis">
      3. Download required files
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Download required files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-update-script" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Update script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-run-update-script" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Run update script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-config-the-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      4. Config the new version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Config the new version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 application.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#42-make-backup-of-system-config" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Make backup of system config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-restart-application-using-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      5. Restart application using new version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Restart application using new version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-stop-armadillo" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Stop Armadillo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-link-new-version" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Link new version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-restart-armadillo" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 Restart Armadillo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-log-on-to-the-ui" class="md-nav__link">
    <span class="md-ellipsis">
      6. Log on to the UI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-update-profiles" class="md-nav__link">
    <span class="md-ellipsis">
      7. Update profiles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logs" class="md-nav__link">
    <span class="md-ellipsis">
      Logs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compare-applicationyml" class="md-nav__link">
    <span class="md-ellipsis">
      Compare application.yml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="migrate-armadillo-3-to-armadillo-4">Migrate Armadillo 3 to Armadillo 4</h1>
<p>Upgrade to Armadillo 4 (rock only)</p>
<details class="note">
<summary>Note</summary>
<p>We assume Ubuntu with systemd is used.</p>
</details>
<p>The upgrade from Armadillo v3.4 to 4.x is breaking as the profiles must be Rock profiles.</p>
<p>Additionally, when working with an armadillo 4 instance, researchers should update <code>DSMolgenisArmadillo</code> to version 2.0.5 (this version is compatible with armadillo 3 as well).</p>
<h2 id="get-latest-version">Get latest version</h2>
<p>For the latest 4.x release check https://github.com/molgenis/molgenis-service-armadillo/releases/latest. This will redirect to a v4.x.y page.</p>
<p>Make a note of the version as you will use this below.</p>
<h2 id="1-check-your-profile-types">1. Check your profile types</h2>
<p>Check if the new profiles are compatible with your needs, these profile names can be edited later on in the manual:</p>
<div class="language-text highlight"><pre><span></span><code>- datashield/rock-base:latest
- datashield/rock-dolomite-xenon:latest
</code></pre></div>
<p>See also DataSHIELD profiles</p>
<h2 id="2-check-server-space">2. Check server space</h2>
<p>Make sure enough disk space is available for the Rock only images.</p>
<h3 id="21-check-disk-space">2.1 Check disk space</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># Check disk space</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>df<span class="w"> </span>-H
</span></code></pre></div>
<p>If you have 15 GB or more available, you can continue. If you have less available, check <code>docker image list</code> to see if you can cleanup some docker images (you only need the latest <code>datashield/armadillo-rserver</code> and <code>datashield/armadillo-rserver_caravan-xenon</code> for armadillo 3).</p>
<h3 id="22-check-docker-images">2.2 Check docker images</h3>
<p>First stop all profiles through the Armadillo UI.</p>
<p>Now that the profiles are not running you can delete the old versions of their docker images.</p>
<p>The command are indicative so change as needed.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># should return empty list (i.e. default, xenon, rock)</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>docker<span class="w"> </span>container<span class="w"> </span>list
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># remove containers not needed</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>docker<span class="w"> </span>container<span class="w"> </span>stop<span class="w"> </span>&lt;id&gt;
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>docker<span class="w"> </span>container<span class="w"> </span>rm<span class="w"> </span>&lt;id&gt;
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># remove unneeded images/profiles (ie. caravan, ...)</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>docker<span class="w"> </span>image<span class="w"> </span>list
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>docker<span class="w"> </span>image<span class="w"> </span>rm<span class="w"> </span>&lt;id&gt;
</span></code></pre></div>
<p>If possible download the new images from shell using <code>docker pull</code> beforehand (for minimum downtime):</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>docker<span class="w"> </span>pull<span class="w"> </span>datashield/rock-base:latest
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>docker<span class="w"> </span>pull<span class="w"> </span>datashield/rock-dolomite-xenon:latest
</span></code></pre></div>
<p>Check disk space again.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Check disk space</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>df<span class="w"> </span>-H
</span></code></pre></div>
<h2 id="3-download-required-files">3. Download required files</h2>
<p>Make a note of the version number ie. <code>v4.1.3</code> as you need to download some files from the terminal using the update script.</p>
<h3 id="31-update-script">3.1 Update script</h3>
<p>You need to be root user.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">cd</span><span class="w"> </span>/root
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="c1"># Change the versions number v4.x.y</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>mkdir<span class="w"> </span>v4.x.y
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nb">cd</span><span class="w"> </span>v4.x.y
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1"># Check directory location</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="nb">pwd</span>
</span></code></pre></div>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Change the version number v4.x.y then run command</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>wget<span class="w"> </span>https://raw.githubusercontent.com/molgenis/molgenis-service-armadillo/v4.x.y/scripts/install/armadillo-check-update.sh
</span></code></pre></div>
<p>Make the script runnable
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>chmod<span class="w"> </span>u+x<span class="w"> </span>armadillo-check-update.sh
</span></code></pre></div></p>
<h3 id="32-run-update-script">3.2 Run update script</h3>
<p>You can run the following script to download the new Armadillo version.</p>
<details class="note">
<summary>Note</summary>
<p>The output could help us to help you fix problems.</p>
</details>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Change the version number v4.x.y</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>./armadillo-check-update.sh<span class="w"> </span><span class="m">4</span>.x.y
</span></code></pre></div>
<p>Once the script has completed, you can verify that the Armadillo JAR file has been downloaded by checking the directory:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># See all jar files on your system</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>ls<span class="w"> </span>-ltr<span class="w"> </span>/usr/share/armadillo/application/
</span></code></pre></div>
<h2 id="4-config-the-new-version">4. Config the new version</h2>
<h3 id="41-applicationyml">4.1 application.yml</h3>
<p>To compare the latest template to your own configuration, see the troubleshooting section below. The safest way to update armadillo is by fetching the template and filling it in with your configuration using the information in the troubleshooting section. You can try the following first:</p>
<p>Edit the application.yml:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>nano<span class="w"> </span>/etc/armadillo/application.yml
</span></code></pre></div>
<p>Below the line <code>docker-management-enabled: true</code>, ensure to insert the line <code>docker-run-in-container: false</code>. Typically, you'll find these configurations at the beginning of the file.</p>
<h2 id="42-make-backup-of-system-config">4.2 Make backup of system config</h2>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># Still in the correct directory? (`/root/v4.x.y`)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nb">pwd</span>
</span></code></pre></div>
<p>We make a backup into the same <code>v4.x.y</code> directory but that is not strictly needed.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>cp<span class="w"> </span>-r<span class="w"> </span>/usr/share/armadillo/data/system<span class="w"> </span>./
</span></code></pre></div>
<p>should result in:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>ls<span class="w"> </span>system/
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># access.json  profiles.json</span>
</span></code></pre></div>
<h2 id="5-restart-application-using-new-version">5. Restart application using new version</h2>
<p>Armadillo has not yet been updated, follow the following steps to do so:</p>
<h3 id="51-stop-armadillo">5.1 Stop Armadillo</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>systemctl<span class="w"> </span>stop<span class="w"> </span>armadillo
</span></code></pre></div>
<h3 id="52-link-new-version">5.2 Link new version</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="c1"># List application files</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>ls<span class="w"> </span>-l<span class="w"> </span>/usr/share/armadillo/application/
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># Remove the linked file</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>rm<span class="w"> </span>/usr/share/armadillo/application/armadillo.jar
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="c1"># Attach new linked file and dont forget to change the version number v4.x.y</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>ln<span class="w"> </span>-s<span class="w"> </span>/usr/share/armadillo/application/armadillo-4.x.y.jar<span class="w"> </span>/usr/share/armadillo/application/armadillo.jar
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="c1"># Check result</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>ls<span class="w"> </span>-l<span class="w"> </span>/usr/share/armadillo/application/
</span></code></pre></div>
<h3 id="53-restart-armadillo">5.3 Restart Armadillo</h3>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>systemctl<span class="w"> </span>start<span class="w"> </span>armadillo
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>systemctl<span class="w"> </span>status<span class="w"> </span>armadillo
</span></code></pre></div>
<h2 id="6-log-on-to-the-ui">6. Log on to the UI</h2>
<p>Go to your armadillo website. Is the version in the left top corner updated? This means the update was successful.</p>
<h2 id="7-update-profiles">7. Update profiles</h2>
<p>Login into the website and go to the profiles tab. Here two profiles should be listed: <code>default</code> and <code>xenon</code>.
Any other profiles can be removed.</p>
<ol>
<li>Edit the default profile.</li>
<li>Change the "image" to <code>datashield/rock-base:latest</code> and save.</li>
<li>Start the default profile.</li>
<li>Edit the "xenon" profile.</li>
<li>Change the "image" to <code>datashield/rock-dolomite-xenon:latest</code> and save.</li>
<li>Start the xenon profile.</li>
</ol>
<p>Everything should now be working correctly. You can try and login to your server via the central analysis server, using
the <code>DSMolgenisArmadillo</code> (2.0.5 or up) package to test.</p>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="logs">Logs</h3>
<p>Reviewing the log files can provide valuable insights into any issues or activities within the application. If you encounter any errors or unexpected behavior, examining the log files can often help diagnose the problem.</p>
<p>Check log files location</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>ls<span class="w"> </span>-l<span class="w"> </span>/var/log/armadillo/
</span></code></pre></div>
<p>should look something like:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">      </span>root<span class="w">      </span><span class="m">111224</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">11</span>:47<span class="w"> </span>armadillo.log
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>armadillo<span class="w"> </span>armadillo<span class="w">  </span><span class="m">68872</span><span class="w"> </span>Jan<span class="w"> </span><span class="m">30</span><span class="w"> </span><span class="m">11</span>:47<span class="w"> </span>audit.log
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">      </span>root<span class="w">        </span><span class="m">8428</span><span class="w"> </span>Dec<span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">11</span>:57<span class="w"> </span>error.log
</span></code></pre></div>
<p>If the <code>error.log</code> data/time is around current day/time you have to check this file.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># See last 100 lines</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">100</span><span class="w"> </span>/var/log/armadillo/error.log
</span></code></pre></div>
<p>Otherwise, you can look into <code>armadillo.log</code>:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># See last 100 lines</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">100</span><span class="w"> </span>/var/log/armadillo/armadillo.log
</span></code></pre></div>
<p>or</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="c1"># Follow all files for changes (keep open to see activities)</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/log/armadillo/*
</span></code></pre></div>
<h3 id="compare-applicationyml">Compare application.yml</h3>
<p>Although we try to be very complete in this manual, if you run into issues, it might be because a setting was changed
in the application.yml. You can check if application settings has any new entries by first downloading the application template (for reference).</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Change the version number v4.x.y</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>wget<span class="w"> </span>https://raw.githubusercontent.com/molgenis/molgenis-service-armadillo/v4.x.y/application.template.yml
</span></code></pre></div>
<p>To see the difference run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>diff<span class="w"> </span>--side-by-side<span class="w"> </span>/etc/armadillo/application.yml<span class="w"> </span>application.template.yml
</span></code></pre></div>
<p>Your output should look like output below.</p>
<ul>
<li>Left side column is your settings.</li>
<li>Right side column is our expected settings.</li>
<li>In the middle some symbols may occur:</li>
<li>the <code>&amp;lt;</code> means only your settings</li>
<li>the <code>&amp;gt;</code> means we have a setting (probably added or options)</li>
<li>the <code>|</code> means both have different values which happens with OICD/oauth settings for sure.</li>
</ul>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>armadillo:<span class="w">                            </span>armadillo:
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">  </span><span class="c1"># set this false if you DON&#39;T want Armadillo to create/edit      # set this false if you DON&#39;T want Armadillo to create/edit</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">  </span>docker-management-enabled:<span class="w"> </span><span class="nb">true</span><span class="w">                  </span>docker-management-enabled:<span class="w"> </span><span class="nb">true</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>....
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>audit:<span class="w">                                  </span>&lt;
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">  </span>log:<span class="w">                                  </span>&lt;
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">    </span>path:<span class="w"> </span>/var/log/armadillo/audit.log<span class="w">  </span>&lt;
</span><span id="__span-23-8"><a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">                                        </span>&lt;
</span><span id="__span-23-9"><a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>....
</span><span id="__span-23-10"><a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>
</span><span id="__span-23-11"><a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>storage:<span class="w">                                         </span>storage:
</span><span id="__span-23-12"><a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">  </span><span class="c1">## to change location of the data storage        ## to change location of the data storage</span>
</span><span id="__span-23-13"><a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">  </span>root-dir:<span class="w"> </span>/usr/share/armadillo/data<span class="w">           </span><span class="p">|</span><span class="w">  </span>root-dir:<span class="w"> </span>data
</span></code></pre></div>
<p>Making changes may be a little tricky. You can backup</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>cp<span class="w"> </span>/etc/armadillo/application.yml<span class="w"> </span>./
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="c1"># list files</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>ls<span class="w"> </span>.
</span></code></pre></div>
<p>then edit</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>nano<span class="w"> </span>/etc/armadillo/application.yml
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../armadillo_migrate_2_to_3/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Migrate Armadillo 2 to 3">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Migrate Armadillo 2 to 3
              </div>
            </div>
          </a>
        
        
          
          <a href="../armadillo_migrate_4_to_5/" class="md-footer__link md-footer__link--next" aria-label="Next: Migrate Armadillo 4 to 5">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Migrate Armadillo 4 to 5
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    Please cite <a href="https://doi.org/10.1093/bioinformatics/btae726" target="_blank">Cadman et al (2024)</a> when using MOLGENIS Armadillo.
    <div>
        Documentation made with
        <a
                href="https://squidfunk.github.io/mkdocs-material/"
                target="_blank" rel="noopener"
        >
            Material for MkDocs
        </a>
    </div>

</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/company/molgenis" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://x.com/molgenis" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.tooltips", "navigation.indexes", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>